(window["webpackJsonpsputnik-app"]=window["webpackJsonpsputnik-app"]||[]).push([[0],{144:function(e,t,n){e.exports=n(239)},239:function(e,t,n){"use strict";n.r(t);n(145),n(171),n(173),n(174),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213);var a=n(0),r=n.n(a),c=n(38),o=n.n(c),i=n(20),l=n.n(i),s=n(100),u=n(10),p=n.n(u),m=n(26),d=n(19),f=n(9),v=(n(89),n(2)),E=n(99),b=n.n(E),h=n(30),O=n.n(h),g=n(31),j=n.n(g),y=Object(v.A)(),_=function(e){var t=e.id,n=e.go,c=e.data,o=e.alert,i=Object(a.useState)(""),s=Object(f.a)(i,2),u=s[0],m=s[1],E=Object(a.useState)(""),b=Object(f.a)(E,2),h=b[0],g=b[1],_={last_name:c.last_name,first_name:c.first_name,father_name:"",bdate:c.bdate,sex:2===c.sex?"2":1===c.sex?"1":"0",email:"",phone:"",occupation:"",specialty:"",languages:"",volExp:"",childExp:"",extraSkills:"",expects:"",medContrad:"",foodPref:"",infoSource:"",size:"",isAgree:"off"};Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.sendPromise("VKWebAppGetPhoneNumber");case 2:return t=e.sent,e.next=5,l.a.sendPromise("VKWebAppGetEmail");case 5:n=e.sent,m(t),g(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var k=function(e){var t=e.currentTarget,n=t.name,a=t.value;_[n]=a};function w(){return(w=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://demo11.alpha.vkhackathon.com:433/api/user/setProfile?auth=oX5n!E2i.VpWpHeo8E6F0q\n&vk_id=".concat(c.id,"&surname=").concat(_.last_name,"&first_name=").concat(_.first_name,"\n&second_name=").concat(_.father_name,"&birthday=").concat(_.bdate,"&sex=").concat(_.sex,"&museum=").concat(_.museum,"\n&email=").concat(_.email?_.email:h.email,"&phone=").concat(_.phone?_.phone:u.phone_number,"\n&occupation=").concat(_.occupation,"&langs=").concat(_.languages,"&volunteer_experience=").concat(_.volExp,"\n&children_work_experience=").concat(_.childExp,"\n&skills=").concat(_.extraSkills,"&expectations=").concat(_.expects,"\n&medical_contraindications=").concat(_.medContrad,"&specialty=").concat(_.specialty,"\n&food_preferences=").concat(_.foodPref,"&clothes_size=").concat(_.size,"\n&information_source=").concat(_.infoSource,"\n&mailing_agreement=").concat("on"===_.isAgree?"true":"false"),{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:e.sent.success?o("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e"):o("\u041e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(v.v,{id:t,theme:"white"},r.a.createElement(v.w,{left:r.a.createElement(v.l,{onClick:n,"data-to":"home"},y===v.m?r.a.createElement(O.a,null):r.a.createElement(j.a,null))},"\u0410\u043d\u043a\u0435\u0442\u0430 \u0432\u043e\u043b\u043e\u043d\u0442\u0451\u0440\u0430"),r.a.createElement(v.i,{name:"new-volunteer"},r.a.createElement(v.o,{top:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",name:"last_name",onChange:k,defaultValue:_.last_name}),r.a.createElement(v.o,{top:"\u0418\u043c\u044f",name:"first_name",onChange:k,defaultValue:_.first_name}),r.a.createElement(v.o,{top:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",name:"father_name",onChange:k,defaultValue:_.father_name}),r.a.createElement(v.o,{top:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",name:"bdate",onChange:k,defaultValue:_.bdate}),r.a.createElement(v.x,{top:"\u041f\u043e\u043b",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b",name:"sex",defaultValue:_.sex,onChange:k},r.a.createElement("option",{value:"2"},"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"),r.a.createElement("option",{value:"1"},"\u0416\u0435\u043d\u0441\u043a\u0438\u0439")),r.a.createElement(v.o,{type:"email",top:"E-mail",name:"email",onChange:k,defaultValue:h.email}),r.a.createElement(v.o,{type:"tel",top:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",onChange:k,defaultValue:u.phone_number}),r.a.createElement(v.o,{top:"\u041c\u0435\u0441\u0442\u043e \u0443\u0447\u0451\u0431\u044b/\u0440\u0430\u0431\u043e\u0442\u044b",name:"occupation",onChange:k,defaultValue:_.occupation}),r.a.createElement(v.o,{top:"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c",name:"specialty",onChange:k,defaultValue:_.specialty}),r.a.createElement(v.o,{top:"\u042f\u0437\u044b\u043a\u0438",name:"languages",onChange:k,defaultValue:_.languages}),[{name:"volExp",text:"\u041e\u043f\u044b\u0442 \u0432\u043e\u043b\u043e\u043d\u0442\u0451\u0440\u0441\u043a\u043e\u0439 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438"},{name:"museum",text:"\u0412\u0430\u0448 \u043c\u0443\u0437\u0435\u0439"},{name:"childExp",text:"\u041e\u043f\u044b\u0442 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0434\u0435\u0442\u044c\u043c\u0438"},{name:"extraSkills",text:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0432\u044b\u043a\u0438"},{name:"expects",text:"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u044f"},{name:"medContrad",text:"\u041c\u0435\u0434\u0438\u0446\u0438\u043d\u0441\u043a\u0438\u0435 \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"},{name:"foodPref",text:"\u041f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f \u0432 \u0435\u0434\u0435"},{name:"infoSource",text:"\u041e\u0442\u043a\u0443\u0434\u0430 \u0412\u044b \u043e \u043d\u0430\u0441 \u0443\u0437\u043d\u0430\u043b\u0438?"}].map((function(e){var t=e.name,n=e.text;return r.a.createElement(v.y,{name:t,key:t,top:n,onChange:k,defaultValue:_[t]})})),r.a.createElement(v.x,{top:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u0434\u0435\u0436\u0434\u044b",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0440 \u043e\u0434\u0435\u0436\u0434\u044b",name:"size",onChange:k,defaultValue:_.size},r.a.createElement("option",{value:"xs"},"XS"),r.a.createElement("option",{value:"s"},"S"),r.a.createElement("option",{value:"m"},"M"),r.a.createElement("option",{value:"l"},"L"),r.a.createElement("option",{value:"xl"},"XL"),r.a.createElement("option",{value:"xxl"},"XXL")),r.a.createElement(v.f,{name:"isAgree",onChange:k},"\u0421\u043e\u0433\u043b\u0430\u0441\u043d\u044b \u043b\u0438 \u0412\u044b \u043d\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0438?"),r.a.createElement(v.c,{size:"xl",onClick:function(e){!function(){w.apply(this,arguments)}(),n(e)},"data-to":"home"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0430\u043d\u043a\u0435\u0442\u0443")))};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){var t=e.events,n=e.title,c=e.go,o=e.active,i=Object(a.useState)([]),l=Object(f.a)(i,2),s=l[0],u=l[1];return Object(a.useEffect)((function(){u(t.map((function(e){if(!o)return r.a.createElement(v.d,{onClick:c,"data-to":"event","data-event":JSON.stringify(e),before:r.a.createElement(v.b,{src:e.photo_100}),description:e.activity||e.date},e.name);var t=Boolean(JSON.parse(e.isApplied));return Boolean(JSON.parse(e.isOpenToApply))&&!t?r.a.createElement(v.d,{onClick:c,"data-to":"event","data-event":JSON.stringify(w({},e,{active:o})),before:r.a.createElement(v.b,{src:e.photo_100}),description:e.activity||e.date,asideContent:r.a.createElement(v.c,{onClick:alert},"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f")},e.name):r.a.createElement(v.d,{onClick:c,"data-to":"event","data-event":JSON.stringify(e),before:r.a.createElement(v.b,{src:e.photo_100}),description:e.activity||e.date,asideContent:t?r.a.createElement(v.g,null,"\u0412\u044b \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u044b"):r.a.createElement(v.g,null,"\u0417\u0430\u043f\u0438\u0441\u044c \u0437\u0430\u043a\u0440\u044b\u0442\u0430")},e.name)})))}),[t,c,o]),r.a.createElement(v.k,{title:n},r.a.createElement(v.q,null,s))},C=function(e){var t=e.fetchedUser,n=e.go,c=Object(a.useState)(0),o=Object(f.a)(c,2),i=o[0],l=o[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://demo11.alpha.vkhackathon.com:433/api/user/getRating?auth=oX5n!E2i.VpWpHeo8E6F0q",{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,l(n.user_rating);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(v.k,{title:"\u041c\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:n,"data-to":"new-user"},r.a.createElement(v.d,{before:t.photo_200?r.a.createElement(v.b,{src:t.photo_200}):null,description:t.city&&t.city.title?t.city.title:"",asideContent:r.a.createElement(v.g,null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",i)},"".concat(t.first_name," ").concat(t.last_name)))},P=function(e){var t=e.go;return r.a.createElement(v.k,{title:"\u041f\u0430\u043d\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f"},r.a.createElement(v.q,null,r.a.createElement(v.e,{onClick:t,"data-to":"org-events"},"\u041c\u043e\u0438 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f"),r.a.createElement(v.e,{onClick:t,"data-to":"event-form"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435"),r.a.createElement(v.e,{onClick:t,"data-to":"task-form"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u043d\u0438\u0435")))},S=function(e){var t=e.id,n=e.go,c=e.alert,o=e.fetchedUser,i=e.token,s=Object(a.useState)(null),u=Object(f.a)(s,2),m=u[0],E=u[1],b=Object(a.useState)([]),h=Object(f.a)(b,2),O=h[0],g=h[1],j=Object(a.useState)([]),y=Object(f.a)(j,2),_=y[0],k=y[1];return Object(a.useEffect)((function(){function e(e,n){return t.apply(this,arguments)}function t(){return(t=Object(d.a)(p.a.mark((function e(t,n){var a,r,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://demo11.alpha.vkhackathon.com:433/api/events/".concat(t,"?auth=oX5n!E2i.VpWpHeo8E6F0q&user_id=").concat(o.id),{mode:"cors"});case 2:return a=e.sent,e.next=5,a.json();case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return");case 8:return c=r.map((function(e){return e.vk_id})),e.next=11,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"groups.getById",request_id:"actual_events_from_vk",params:{v:"5.101",group_ids:c.join(","),fields:"activity,photo_100,place,description,start_date,finish_date,photo_200",access_token:i}});case 11:s=e.sent,r=s.response.map((function(e,t){return e.eventId=r[t].event_id,e.isOpenToApply=r[t].is_open_to_apply,e.isApplied=r[t].is_user_applied,e.organizerId=r[t].organizer_id,e.managerId=r[t].manager_id,e})),n(r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"groups.getById",request_id:"groups_from_base",params:{v:"5.101",group_ids:"gagadnd,210,324,43545,43452,5656,13",fields:"activity,photo_100,place,description,start_date,finish_date,photo_200",access_token:i}});case 2:t=e.sent,E(t&&t.response);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}(),o&&(e("getActualEvents",g),e("getMyPastEvents",k))}),[i,o]),r.a.createElement(v.v,{id:t},r.a.createElement(v.w,null,"\u0421\u043f\u0443\u0442\u043d\u0438\u043a"),o&&r.a.createElement(C,{go:n,fetchedUser:o}),o&&o.admin&&r.a.createElement(P,{go:n}),m&&r.a.createElement(x,{title:"\u041f\u0440\u0435\u0434\u0441\u0442\u043e\u044f\u0449\u0438\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",events:O,go:n,active:!0,alert:c}),m&&r.a.createElement(x,{title:"\u041f\u0440\u043e\u0448\u0435\u0434\u0448\u0438\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",events:_,go:n,active:!1,alert:c}))};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=Object(v.A)();function q(){return(q=Object(d.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://demo11.alpha.vkhackathon.com:433/api/events/getEvent?auth=oX5n!E2i.VpWpHeo8E6F0q&id=".concat(t.eventId),{mode:"cors"});case 2:return a=e.sent,e.next=5,a.json();case 5:r=e.sent,n(A({VK:t},r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(e){var t=e.event,n=e.go,c=e.id,o=e.register,i=Object(a.useState)({}),l=Object(f.a)(i,2),s=l[0],u=l[1];return Object(a.useEffect)((function(){!function(e,t){q.apply(this,arguments)}(JSON.parse(t),u)}),[t]),r.a.createElement(v.v,{id:c},r.a.createElement(v.w,{left:r.a.createElement(v.l,{onClick:n,"data-to":"home"},D===v.m?r.a.createElement(O.a,null):r.a.createElement(j.a,null))},s.active?"\u0417\u0430\u043f\u0438\u0441\u044c \u043d\u0430 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f"),s.VK&&s.VK.id&&r.a.createElement(v.k,null,r.a.createElement(v.d,{photo:s.VK.photo_200,description:s.VK.activity,bottomContent:s.VK.description,asideContent:r.a.createElement(v.p,{href:"https//vk.com/app".concat(s.VK.id)},r.a.createElement(v.c,null,"\u0412 \u0433\u0440\u0443\u043f\u043f\u0443")),before:r.a.createElement(v.b,{src:s.VK.photo_200,size:56}),size:"l"},s.VK.name)),r.a.createElement(v.k,null,r.a.createElement(v.q,null,r.a.createElement(v.d,{multiline:!0},r.a.createElement(v.n,{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},s.name)),r.a.createElement(v.d,{multiline:!0},r.a.createElement(v.n,{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},s.description)),r.a.createElement(v.d,{multiline:!0},r.a.createElement(v.n,{title:"\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f"},s.date)),r.a.createElement(v.d,{multiline:!0},r.a.createElement(v.n,{title:"\u041c\u0435\u0441\u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f"},s.place)),r.a.createElement(v.d,{multiline:!0},r.a.createElement(v.n,{title:"\u0417\u0430\u0434\u0430\u0447\u0438 \u0432\u043e\u043b\u043e\u043d\u0442\u0435\u0440\u043e\u0432"},s.volunteers_task)),r.a.createElement(v.d,{multiline:!0},r.a.createElement(v.n,{title:"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0432\u043e\u043b\u043e\u043d\u0442\u0435\u0440\u0430\u043c"},s.volunteer_requirements)),s.VK&&s.VK.active&&r.a.createElement(v.i,null,r.a.createElement(v.j,{top:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u0434\u043e\u0431\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f"},s.time_periods&&s.time_periods.map((function(e){return"true"==e.is_available?r.a.createElement(v.f,null,e.time_period):r.a.createElement(v.g,null,e.time_period)}))),r.a.createElement(v.c,{onClick:o,"data-period_ids":"1,2,3","data-event_id":s.VK.id},"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f")))))};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=Object(v.A)(),N=function(e){var t=e.go,n=e.id,c=e.openModal,o=e.selectedEventJSON,i=e.periodsList,l=e.userId,s=e.clearSelectedEvent,u=Object(a.useState)(null),E=Object(f.a)(u,2),b=E[0],h=E[1],g=Object(a.useState)({}),y=Object(f.a)(g,2),_=y[0],k=y[1],w=Object(a.useState)([]),x=Object(f.a)(w,2),C=x[0],P=x[1];Object(a.useEffect)((function(){var e=JSON.parse(o);h(e),e&&k(I({},_,{name:e&&e.name,vk_id:e.id,description:e.description})),P(i)}),[o,i]),Object(a.useEffect)((function(){k(I({},_,{time_periods:C.map((function(e){return"".concat(e.period,"%").concat(e.count)})).join("$")}))}),[C]);var S=function(e){var t=e.currentTarget,n=t.name,a=t.value;k(I({},_,Object(m.a)({},n,a)))};return r.a.createElement(v.v,{id:n},r.a.createElement(v.w,{left:r.a.createElement(v.l,{onClick:t,"data-to":"home"},W===v.m?r.a.createElement(O.a,null):r.a.createElement(j.a,null))},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435"),r.a.createElement(v.k,{title:"\u0413\u0440\u0443\u043f\u043f\u0430 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f"},b&&r.a.createElement(v.d,{before:r.a.createElement(v.b,{src:b.photo_100,size:56}),size:"xl",description:b.activity,asideContent:r.a.createElement(v.c,{onClick:s},"No")},b.name),r.a.createElement(v.e,{onClick:c,"data-modal_id":"select-event"},b?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c":"\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435")),r.a.createElement(v.k,null,r.a.createElement(v.i,null,b?r.a.createElement(v.o,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",name:"name",defaultValue:b.name,onChange:S}):r.a.createElement(v.o,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",name:"name",onChange:S}),r.a.createElement(v.o,{top:"\u0412\u0435\u0441 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",name:"weight",onChange:S}),r.a.createElement(v.y,{top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"description",onChange:S},"dfgdhd"),r.a.createElement(v.o,{top:"\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f",name:"date",onChange:S}),r.a.createElement(v.y,{top:"\u041c\u0435\u0441\u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f",name:"place",onChange:S}),r.a.createElement(v.y,{top:"\u0417\u0430\u0434\u0430\u0447\u0438 \u0432\u043e\u043b\u043e\u043d\u0442\u0435\u0440\u043e\u0432",name:"volunteers_task",onChange:S}),r.a.createElement(v.y,{top:"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0432\u043e\u043b\u043e\u043d\u0442\u0435\u0440\u0430\u043c",name:"volunteer_requirements",onChange:S}),r.a.createElement(v.j,{top:"\u0412\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043a\u0438"},r.a.createElement(v.k,null,r.a.createElement(v.q,null,C.map((function(e,t){return r.a.createElement(v.d,{asideContent:e.count},e.period)}))),r.a.createElement(v.e,{onClick:c,"data-modal_id":"add-time-period"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043e\u043a"))),r.a.createElement(v.g,null,r.a.createElement(v.c,{size:"xl",onClick:function(){function e(){return(e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://demo11.alpha.vkhackathon.com:433/api/events/createEvent\n?auth=oX5n!E2i.VpWpHeo8E6F0q&\nuser_vk_id=".concat(l,"\nvk_id=").concat(_.vk_id,"\nname=").concat(_.name,"\ndescription=").concat(_.description,"\nweight=").concat(_.weight,"\ndate=").concat(_.date,"\nvolunteers_task=").concat(_.volunteers_task,"\nvolunteer_requirements=").concat(_.volunteer_requirements,"\nplace=").concat(_.place),{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},level:"secondary"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))},T=n(53),J=n.n(T);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var X=Object(v.A)(),F=function(e){var t=e.activeModalId,n=e.closeModal,c=e.token,o=Object(a.useState)(null),i=Object(f.a)(o,2),s=i[0],u=i[1],E=Object(a.useState)({}),b=Object(f.a)(E,2),h=b[0],O=b[1],g=Object(a.useState)(null),j=Object(f.a)(g,2),y=j[0],_=j[1],k=function(e){var t=e.currentTarget,n=t.name,a=t.value;O(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h,Object(m.a)({},n,a)))};return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"groups.get",request_id:"groups_active",params:{v:"5.101",filter:"events",extended:"1",fields:"activity,photo_100,place,description,start_date,finish_date,photo_200",access_token:c}});case 2:t=e.sent,_(t&&t.response&&t.response.items&&t.response.items.map((function(e){return r.a.createElement(v.d,{before:r.a.createElement(v.b,{src:e.photo_100,size:56}),size:"xl",description:e.activity,asideContent:r.a.createElement(v.c,{onClick:n,"data-selected_event":JSON.stringify(e),size:"l"},"\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c")},e.name)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c,n]),Object(a.useEffect)((function(){u(t)}),[t]),r.a.createElement(v.u,{activeModal:s},r.a.createElement(v.s,{id:"select-event",onClose:n,"data-selected_event":"null",header:r.a.createElement(v.t,{left:X!==v.m&&r.a.createElement(v.l,{onClick:n,"data-selected_event":"null"},r.a.createElement(J.a,null))},"\u041c\u043e\u0438 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f")},r.a.createElement(v.k,null,r.a.createElement(v.q,null,y))),r.a.createElement(v.r,{id:"add-time-period",title:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043e\u043a \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b",caption:"\u0422\u0430\u043a \u0436\u0435 \u043d\u0443\u0436\u043d\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u043b\u043e\u043d\u0442\u0435\u0440\u043e\u0432",actions:[{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",type:"primary",action:function(){n({period:h})}}]},r.a.createElement(v.k,null,r.a.createElement(v.i,null,r.a.createElement(v.o,{top:"\u0412\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043e\u043a",onChange:k,name:"period"}),r.a.createElement(v.o,{top:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u043b\u043e\u043d\u0442\u0435\u0440\u043e\u0432",onChange:k,name:"count"})))))},H=n(97),U=n.n(H);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var B=Object(v.A)(),G=function(e){var t=e.go,n=e.id,c=Object(a.useState)({}),o=Object(f.a)(c,2),i=o[0],l=o[1],s=function(e){var t=e.currentTarget,n=t.name,a=t.value;l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,Object(m.a)({},n,a)))};return r.a.createElement(v.v,{id:n},r.a.createElement(v.w,{left:r.a.createElement(v.l,{onClick:t,"data-to":"home"},B===v.m?r.a.createElement(O.a,null):r.a.createElement(j.a,null))},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u043d\u0438\u0435"),r.a.createElement(v.i,null,JSON.stringify(i),r.a.createElement(v.h,{top:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0444\u043e\u0442\u043e",name:"file",onChange:s,before:r.a.createElement(U.a,null),size:"l"},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0433\u0430\u043b\u0435\u0440\u0435\u044e"),r.a.createElement(v.y,{name:"description",onChange:s,top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f"}),r.a.createElement(v.c,{onClick:function(){}},"\u0420\u0430\u0437\u043e\u0441\u043b\u0430\u0442\u044c \u0432\u043e\u043b\u043e\u043d\u0442\u0435\u0440\u0430\u043c")))},R=Object(v.A)(),$=function(e){var t=e.id,n=e.go,c=e.user,o=Object(a.useState)([]),i=Object(f.a)(o,2),l=i[0],s=i[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://demo11.alpha.vkhackathon.com:433/api/events/getMyOrgEvents?auth=oX5n!E2i.VpWpHeo8E6F0q&vk_id=".concat(c.id),{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(v.v,{id:t},r.a.createElement(v.w,{left:r.a.createElement(v.l,{onClick:n,"data-to":"home"},R===v.m?r.a.createElement(O.a,null):r.a.createElement(j.a,null))},"\u041c\u043e\u0438 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f"),l&&l.map((function(e){return e.id=e.vk_id,r.a.createElement(v.d,{onClick:n,"data-to":"vol-list","data-event":JSON.stringify(e),before:r.a.createElement(v.b,{src:e.photo_100}),description:e.activity||e.date},e.name)})))},Q=n(98),Y=n.n(Q),Z=Object(v.A)(),ee=function(e){var t=e.id,n=e.go,c=e.event,o=e.token,i=e.alert,s=Object(a.useState)([]),u=Object(f.a)(s,2),m=u[0],E=u[1],b=Object(a.useState)(""),h=Object(f.a)(b,2),g=h[0],y=h[1];Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"users.get",request_id:"volunteers_from_vk",params:{v:"5.101",user_ids:t.volunteers.map((function(e){return e.volunteer_id})).join(","),fields:"photo_100",access_token:o}});case 2:n=e.sent,E(n.response);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t=JSON.parse(c);t&&(!function(t){e.apply(this,arguments)}(t),y(t.name))}),[c]);return r.a.createElement(v.v,{id:t},r.a.createElement(v.w,{left:r.a.createElement(v.l,{onClick:n,"data-to":"org-events"},Z===v.m?r.a.createElement(O.a,null):r.a.createElement(j.a,null))},g),r.a.createElement(v.k,{title:"\u0412\u043e\u043b\u043e\u043d\u0442\u0435\u0440\u044b"},r.a.createElement(v.q,null,m.map((function(e){return r.a.createElement(v.d,{expandable:!0,before:r.a.createElement(v.b,{src:e.photo_100,size:48}),size:"m"},"".concat(e.first_name," ").concat(e.last_name))}))),r.a.createElement(v.e,{onClick:function(e){function t(){return(t=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"messages.createChat",request_id:"create_chat",params:{v:"5.101",user_ids:c.volunteers.map((function(e){return e.volunteer_id})).join(","),title:c.name,access_token:o}});case 2:t=e.sent,i(JSON.stringify(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},before:r.a.createElement(Y.a,null)},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0447\u0430\u0442")))};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae=function(){var e=Object(a.useState)("home"),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),i=Object(f.a)(o,2),u=i[0],m=i[1],E=Object(a.useState)(null),h=Object(f.a)(E,2),O=h[0],g=h[1],j=Object(a.useState)(null),y=Object(f.a)(j,2),k=y[0],w=y[1],x=Object(a.useState)(null),C=Object(f.a)(x,2),P=C[0],V=C[1],A=Object(a.useState)(""),D=Object(f.a)(A,2),q=D[0],z=D[1],I=Object(a.useState)([]),W=Object(f.a)(I,2),T=W[0],J=W[1],M=Object(a.useState)(r.a.createElement(b.a,{size:"large"})),X=Object(f.a)(M,2),H=X[0],U=X[1];Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(p.a.mark((function e(){var t,n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.sendPromise("VKWebAppGetUserInfo");case 2:return t=e.sent,e.next=5,l.a.sendPromise("VKWebAppGetAuthToken",{app_id:7150436,scope:"groups"});case 5:return n=e.sent,e.next=8,fetch("https://demo11.alpha.vkhackathon.com:433/api/user/getUserStatus?auth=oX5n!E2i.VpWpHeo8E6F0q&vk_id=".concat(t.id),{mode:"cors"});case 8:return a=e.sent,e.next=11,a.json();case 11:r=e.sent,V(ne({},t,{admin:r.user_status})),z(n.access_token),U(null);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l.a.subscribe((function(e){var t=e.detail,n=t.type,a=t.data;if("VKWebAppUpdateConfig"===n){var r=document.createAttribute("scheme");r.value=a.scheme?a.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){e.apply(this,arguments)}()}),[]);var L=function(e){c(e.currentTarget.dataset.to),e.currentTarget.dataset.event&&g(e.currentTarget.dataset.event)},B=function(){U(null)},R=function(e){U(r.a.createElement(v.a,{actionsLayout:"vertical",onClose:B},r.a.createElement("h2",null,e)))};function Q(){return(Q=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://demo11.alpha.vkhackathon.com:433/api/events/applyForEvent\n\t\t?auth=oX5n!E2i.VpWpHeo8E6F0q\n\t\t&user_vk_id=".concat(P.id,"\n\t\t&event_id=").concat(t.currentTarget.dataset.event_id,"\n\t\t&time_period_ids=").concat(t.currentTarget.dataset.period_ids),{mode:"cors"});case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent.success&&R("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(v.z,{activePanel:n,popout:H,modal:r.a.createElement(F,{token:q,closeModal:function(e){e&&e.currentTarget&&e.currentTarget.dataset.selected_event&&w(e.currentTarget.dataset.selected_event),e&&e.period&&J([].concat(Object(s.a)(T),[e.period])),m(null)},activeModalId:u})},r.a.createElement(S,{id:"home",go:L,alert:function(e){R(e.currentTarget.dataset.message)},fetchedUser:P,token:q}),r.a.createElement(_,{id:"new-user",go:L,data:P,alert:R}),r.a.createElement(K,{id:"event",event:O,go:L,register:function(e){return Q.apply(this,arguments)}}),r.a.createElement(N,{id:"event-form",go:L,periodsList:T,openModal:function(e){m(e.currentTarget.dataset.modal_id)},clearSelectedEvent:function(){w(null)},selectedEventJSON:k,userId:P&&P.id}),r.a.createElement(G,{id:"task-form",go:L}),r.a.createElement($,{id:"org-events",go:L,user:P}),r.a.createElement(ee,{id:"vol-list",go:L,event:O,token:q}))};l.a.send("VKWebAppInit"),o.a.render(r.a.createElement(ae,null),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.276b0c4b.chunk.js.map